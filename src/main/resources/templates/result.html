<!DOCTYPE html>
<html lang="en">
<head>
    <div th:replace="index :: fragment-header"></div>
</head>
<body>

<div style="text-align: center">
    <h1>
        <p>Search Match</p>
    </h1>
    <form th:action="@{/}" method="post" autocomplete="on">
        <input type="text" name="summonerName" style="width: 400px; height: 20px" placeholder="닉네임" required>
        <button type="submit">검색</button>
    </form>
</div>

<br><br>

<div align="center">
    <th:block th:if="${result != null}">
        <table style="text-align: center">
            <tr>
                <td>
                    <img th:src="${iconUrl}" width="150" style="border-radius: 30px">
                </td>
                <td>
                    <h2>
                        <p>
                            <span th:text="${result.name}"></span>
                        </p>
                        <p>
                            레벨 : <span th:text="${result.summonerLevel}"></span>
                        </p>
                    </h2>
                </td>
            </tr>
            <tr>
                <th:block th:if="${!#lists.isEmpty(leagueEntry)}">
                    <td>
                        <p><img th:src="${tierUrl}" width="150" style="border-radius: 30px"></p>
                    </td>
                    <td>
                        <h2>
                            <p>
                                <span th:text="${leagueEntry[0].tier}"></span>
                                <span th:text="${leagueEntry[0].rank}"></span>
                                <span th:text="${leagueEntry[0].leaguePoints} + 포인트"></span>
                            </p>
                            <p>
                                <span th:text="${leagueEntry[0].wins}"></span>승
                                <span th:text="${leagueEntry[0].losses}"></span>패
                            </p>
                        </h2>
                    </td>
                </th:block>
            </tr>
        </table>

        <th:blcok th:if="${#lists.isEmpty(leagueEntry)}">
            <h2>Unranked</h2>
        </th:blcok>

        <br>

        <th:block th:if="${!#lists.isEmpty(matches)}">
            <table>
                <tr th:each="match : ${matches}">
                    <td style="text-align: center; padding: 30px 0 30px 0">
                        <h3>
                            <span th:if="${match.gameMode == 'ARAM'}">무작위 총력전 </span>
                            <span th:if="${match.gameMode == 'CLASSIC'}"> 소환사 협곡 </span>
                            <span th:text="${match.endTime}"></span>
                            <p>
                                <span th:if="${match.win == true}" style="color: blue">
                                    승리
                                </span>
                                <span th:if="${match.win == false}" style="color: red">
                                    패배
                                </span>
                                <span th:text="${match.gameDurationMinutes}"></span>분
                                <span th:text="${match.gameDurationSeconds}"></span>초
                            </p>
                        </h3>

                        <table style="margin-left: auto; margin-right: auto">
                            <tr>
                                <td>
                                    <img th:src="${match.myInfoDTO.championName}" width="100"
                                         style="border-radius: 70px">
                                </td>
                                <td>
                                    <div style="vertical-align: top">
                                        <img th:src="${match.myInfoDTO.primaryPerk}" width="40"
                                             style="background-color: black; border-radius: 70px">
                                    </div>
                                    <div style="vertical-align: bottom">
                                        <img th:src="${match.myInfoDTO.subPerk}" width="40">
                                    </div>
                                </td>
                                <td>
                                    <div style="vertical-align: top">
                                        <h2>
                                            <span th:text="${match.myInfoDTO.kills}"></span> /
                                            <span th:text="${match.myInfoDTO.deaths}"></span> /
                                            <span th:text="${match.myInfoDTO.assists}"></span>
                                        </h2>
                                    </div>

                                    <div style="vertical-align: bottom">
                                        <th:block th:each="item : ${match.myInfoDTO.items}">
                                            <img th:src="${item}" width="30">
                                        </th:block>
                                    </div>
                                </td>
                            </tr>
                        </table>


                        <details>
                            <summary style="cursor: pointer"> 상세보기</summary>
                            <table style="border: solid black 1px">
                                <tr>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th>KDA</th>
                                    <th>cs</th>
                                    <th>피해량</th>
                                    <th>아이탬</th>
                                </tr>

                                <tr th:each="userInfo : ${match.matchUserInfoDTOs}">
                                    <td><img th:src="${userInfo.championName}" width="40"
                                             style="border-radius: 70px">
                                    </td>
                                    <td>
                                        <div style="vertical-align: top">
                                            <img th:src="${userInfo.primaryPerk}" width="20"
                                                 style="background-color: black; border-radius: 70px">
                                        </div>
                                        <div style="vertical-align: bottom">
                                            <img th:src="${userInfo.subPerk}" width="20">
                                        </div>
                                    </td>
                                    <td>
                                        <th:block th:if="${userInfo.win == true}">
                                            <p th:text="${userInfo.summonerName}"
                                               style="color: blue; font-weight: bold"></p>
                                        </th:block>
                                        <th:block th:if="${userInfo.win == false}">
                                            <p th:text="${userInfo.summonerName}"
                                               style="color: red; font-weight: bold"></p>
                                        </th:block>
                                    </td>
                                    <td style="text-align: center">
                                        <span th:text="${userInfo.kills}" style="font-weight: bold"></span> /
                                        <span th:text="${userInfo.deaths}" style="font-weight: bold"></span> /
                                        <span th:text="${userInfo.assists}" style="font-weight: bold"></span>
                                    </td>


                                    <td style="text-align: center">
                                            <span th:text="${userInfo.totalMinionsKilled}"
                                                  style="font-weight: bold"></span>
                                    </td>
                                    <td style="text-align: center">
                                    <span th:text="${userInfo.totalDamageDealtToChampions}"
                                          style="font-weight: bold"></span>
                                    </td>
                                    <td>
                                        <th:block th:each="item : ${userInfo.items}">
                                            <img th:src="${item}" width="30">
                                        </th:block>
                                    </td>
                                </tr>
                            </table>
                        </details>
                    </td>
                </tr>
            </table>
        </th:block>

    </th:block>
    <th:block th:if="${result == null}">
        <h2>
            잘못된 소환사 이름입니다. 다시 입력하세요.
        </h2>
    </th:block>
    <br>

<!--    <form th:action="@{/}" method="post">-->
<!--        <button type="submit" name="summonerName" value="result.name">더 보기</button>-->
<!--    </form>-->

</div>

</body>
</html>